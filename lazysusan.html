<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KRYONIS // VISUAL CORE</title>
    <style>
        body {
            background-color: #020202;
            color: #ccc;
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- VISUAL CORE (The 12 Nodes) --- */
        #visual-core {
            height: 180px;
            background: #0a0a0a;
            border-bottom: 1px solid #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .grid-label {
            font-size: 10px;
            color: #555;
            margin-bottom: 15px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .node-grid {
            display: flex;
            gap: 12px;
        }

        .node {
            width: 16px;
            height: 40px; /* Vertical bars like Grok/Equalizer */
            background: #222;
            border: 1px solid #444;
            transition: all 0.2s;
            position: relative;
        }

        .node::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 8px;
            color: #444;
        }

        /* Active States */
        .node.thinking {
            animation: pulse 0.5s infinite alternate;
            background: #555;
        }

        .node.active-blue { background: #00ccff; box-shadow: 0 0 15px #00ccff; border-color: #fff; height: 60px; margin-top: -10px; }
        .node.active-green { background: #00ff41; box-shadow: 0 0 15px #00ff41; border-color: #fff; height: 60px; margin-top: -10px; }
        .node.active-gold { background: #ffd700; box-shadow: 0 0 15px #ffd700; border-color: #fff; height: 60px; margin-top: -10px; }
        .node.active-red { background: #ff3333; box-shadow: 0 0 15px #ff3333; border-color: #fff; height: 60px; margin-top: -10px; }

        @keyframes pulse { from { opacity: 0.4; } to { opacity: 1; } }

        /* --- TERMINAL --- */
        #terminal {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            font-size: 13px;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        .log-entry { margin-bottom: 8px; display: none; padding-left: 10px; border-left: 2px solid transparent; }
        .log-entry.blue-line { border-left: 2px solid #00ccff; }
        .log-entry.green-line { border-left: 2px solid #00ff41; }
        .log-entry.gold-line { border-left: 2px solid #ffd700; }
        .log-entry.red-line { border-left: 2px solid #ff3333; }

        .highlight { color: #00ff41; }
        .alert { color: #ff3333; }
        .blue { color: #00ccff; }
        .gold { color: #d4af37; }
        .dim { color: #555; }

        .box { border: 1px solid #444; background: #111; padding: 15px; margin: 15px 0; }

        /* --- INPUT --- */
        #input-area {
            background: #000;
            padding: 20px;
            border-top: 1px solid #333;
            display: flex;
            justify-content: center;
        }
        .input-wrap {
            max-width: 900px;
            width: 100%;
            display: flex;
            align-items: center;
        }
        input {
            background: transparent;
            border: none;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            font-size: 16px;
            width: 100%;
            outline: none;
            margin-left: 10px;
        }

    </style>
</head>
<body>

<div id="visual-core">
    <div class="grid-label">KRYONIS NEURAL LATTICE (12 NODES)</div>
    <div class="node-grid">
        <div class="node" id="n0"></div>
        <div class="node" id="n1"></div>
        <div class="node" id="n2"></div>
        <div class="node" id="n3"></div>
        <div class="node" id="n4"></div>
        <div class="node" id="n5"></div>
        <div class="node" id="n6"></div>
        <div class="node" id="n7"></div>
        <div class="node" id="n8"></div>
        <div class="node" id="n9"></div>
        <div class="node" id="n10"></div>
        <div class="node" id="n11"></div>
    </div>
</div>

<div id="terminal">
    <div class="log-entry" style="display:block; color: #555;">System Idle. Neural Lattice Ready.</div>
    <div class="log-entry" style="display:block; color: #555;">Available Protocols: ARCTIC, DUBAI, AION, ENERGY</div>
</div>

<div id="input-area">
    <div class="input-wrap">
        <span class="highlight">COMMAND:~$</span>
        <input type="text" id="user-input" placeholder="Enter protocol..." autocomplete="off" autofocus>
    </div>
</div>

<script>
    const terminal = document.getElementById('terminal');
    const inputField = document.getElementById('user-input');
    const nodes = document.querySelectorAll('.node');

    // HELPER: Reset nodes to idle
    function resetNodes() {
        nodes.forEach(n => n.className = 'node');
    }

    // HELPER: Animate thinking (Random flashing)
    let thinkingInterval;
    function startThinking() {
        clearInterval(thinkingInterval);
        thinkingInterval = setInterval(() => {
            nodes.forEach(n => {
                if (Math.random() > 0.7) n.classList.add('thinking');
                else n.classList.remove('thinking');
            });
        }, 100);
    }

    function stopThinking() {
        clearInterval(thinkingInterval);
        resetNodes();
    }

    // HELPER: Activate specific node
    function activateNode(index, colorClass) {
        resetNodes();
        if(nodes[index]) nodes[index].classList.add(colorClass);
    }

    // SCENARIO DATA
    // nodeIndex: 0-11 (0=Strat, 4=Ethic, 7=Bio, 10=Token)
    
    const sc_arctic = [
        { text: "INITIALIZING ARCTIC PROTOCOLS...", delay: 1000, node: -1 },
        { text: "[STRATEGIC_AWARENESS]: Analysis. Melting ice opens Northern Sea Route. Vital for logistics.", delay: 2000, node: 0, color: 'active-blue', style: 'blue-line' },
        { text: "[BIO_ECONOMIST]: <span class='alert'>WARNING.</span> Infrastructure built on permafrost is collapsing. We are losing ground.", delay: 2500, node: 7, color: 'active-green', style: 'green-line' },
        { text: "[TOKENOMIST]: Splicing logic. Create 'Cryo-Bonds'. Investment vehicles that pay yield ONLY if permafrost temperature remains stable.", delay: 3000, node: 10, color: 'active-gold', style: 'gold-line' },
        { text: "<div class='box'><strong class='highlight'>OUTPUT: THE COLD SHIELD</strong><br>Protecting Ice as a Strategic Asset via Financial Instruments.</div>", delay: 500, node: -1 }
    ];

    const sc_dubai = [
        { text: "INITIALIZING CITY OS...", delay: 1000, node: -1 },
        { text: "[STRATEGIC_NODE]: Security is paramount. Deploy centralized surveillance grid.", delay: 2000, node: 0, color: 'active-blue', style: 'blue-line' },
        { text: "[ETHICAL_REFLECTOR]: <span class='alert'>DENIED.</span> Total surveillance crushes human spirit and innovation.", delay: 2000, node: 4, color: 'active-red', style: 'red-line' },
        { text: "[BIO_ECONOMIST]: Alternative: Distributed Intelligence. Like a nervous system, not a camera.", delay: 2500, node: 7, color: 'active-green', style: 'green-line' },
        { text: "<div class='box'><strong class='highlight'>OUTPUT: THE INVISIBLE CITY</strong><br>Decentralized AI Mesh with Privacy Core.</div>", delay: 500, node: -1 }
    ];

    const sc_aion = [
        { text: "LOADING AION LONGEVITY MODELS...", delay: 1000, node: -1 },
        { text: "[NEURO_MODELER]: If lifespan = 150 years, career structures must change. Retirement at 65 is obsolete.", delay: 2000, node: 2, color: 'active-blue', style: 'blue-line' },
        { text: "[BIO_ECONOMIST]: The body is a continuous asset. Maintenance is cheaper than replacement.", delay: 2500, node: 7, color: 'active-green', style: 'green-line' },
        { text: "[TOKENOMIST]: Proposal: Health-Backed Currency. Your vitality is your wallet.", delay: 2500, node: 10, color: 'active-gold', style: 'gold-line' },
        { text: "<div class='box'><strong class='highlight'>OUTPUT: 7-STAGE LIFECYCLE</strong><br>Redesigning society for the 150-year human.</div>", delay: 500, node: -1 }
    ];

    // RUNNER
    function runScenario(data) {
        inputField.value = '';
        inputField.disabled = true; // Lock input
        startThinking(); // Visual chaos

        let i = 0;
        function step() {
            if (i >= data.length) {
                stopThinking();
                inputField.disabled = false;
                inputField.focus();
                return;
            }
            const item = data[i];
            
            // Update Visuals
            if (item.node >= 0) {
                activateNode(item.node, item.color);
            } else {
                resetNodes(); // System msg
                if (i < data.length -1) startThinking(); // Keep thinking between msgs
            }

            // Update Text
            const div = document.createElement('div');
            div.className = 'log-entry ' + (item.style || '');
            div.innerHTML = item.text;
            terminal.appendChild(div);
            div.style.display = 'block';
            window.scrollTo(0, document.body.scrollHeight);

            i++;
            setTimeout(step, item.delay);
        }
        
        // Start first step after a brief "processing" pause
        setTimeout(step, 1500);
    }

    inputField.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            const val = inputField.value.toLowerCase();
            const div = document.createElement('div');
            div.className = 'log-entry';
            div.innerHTML = `> USER: ${inputField.value.toUpperCase()}`;
            div.style.color = '#fff';
            div.style.display = 'block';
            terminal.appendChild(div);

            if (val.includes('arctic') || val.includes('russia')) runScenario(sc_arctic);
            else if (val.includes('dubai') || val.includes('ai')) runScenario(sc_dubai);
            else if (val.includes('aion') || val.includes('life')) runScenario(sc_aion);
            else {
                 // Fallback thinking effect then error
                 startThinking();
                 setTimeout(() => {
                     stopThinking();
                     const err = document.createElement('div');
                     err.className = 'log-entry alert';
                     err.innerHTML = 'UNKNOWN PROTOCOL. TRY: ARCTIC, DUBAI, AION';
                     err.style.display = 'block';
                     terminal.appendChild(err);
                     inputField.value = '';
                 }, 2000);
            }
        }
    });
</script>
</body>
</html>
